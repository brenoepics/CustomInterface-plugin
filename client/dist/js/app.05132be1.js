(function(){"use strict";var e={3503:function(e,t,n){var s=n(7327);class a{static Log(e){if(!a.DebugMode)return;let t=new Date;console.log("["+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+"] "+e)}}(0,s.Z)(a,"DebugMode",!0);var o=n(144),i=n(629);class r{constructor(){(0,s.Z)(this,"username",void 0),(0,s.Z)(this,"id",void 0),(0,s.Z)(this,"look",void 0),this.username="",this.id=0,this.look=""}}const c={user:new r,credits:0},l=!0,d={setUsername(e,t){e.user.username=t},setUser(e,t){e.user=t},setLook(e,t){e.user.look=t},setCredits(e,t){e.credits=t},setId(e,t){e.user.id=t}},m={namespaced:l,state:c,mutations:d},u={values:[],open:!1},h=!0,p={setCommands(e,t){e.values=t},setOpen(e,t){e.open=t}},g={namespaced:h,state:u,mutations:p};n(7658);const w={open:!1,playing:!1,playlist:[],currentIndex:0},f=!0,v={setOpen(e,t){e.open=t},setPlaying(e,t){e.playing=t},setPlaylist(e,t){e.playlist=t},addToPlaylist(e,t){e.playlist.push(t)},removeFromPlaylist(e,t){e.playlist.splice(t,1)},setCurrentIndex(e,t){e.currentIndex=t},incrementIndex(e){e.currentIndex++},decrementIndex(e){e.currentIndex--}},b={namespaced:f,state:w,mutations:v};class _{constructor(e,t,n){(0,s.Z)(this,"name",void 0),(0,s.Z)(this,"value",void 0),(0,s.Z)(this,"image",void 0),this.name=e,this.value=t,this.image=n}}const M={results:[],open:!1,audio:new Map,isSpinning:!1,won:!1,items:[new _("Lemon",3,"https://cdn4.iconfinder.com/data/icons/slot-machines/512/Lemon-512.png"),new _("Melon",8,"https://cdn4.iconfinder.com/data/icons/slot-machines/512/Watermelon-512.png"),new _("Grapes",10,"https://cdn4.iconfinder.com/data/icons/slot-machines/512/Grapes-512.png"),new _("Cherry",32,"https://cdn4.iconfinder.com/data/icons/slot-machines/512/Cherry-512.png"),new _("Bar",64,"https://cdn4.iconfinder.com/data/icons/casino-games/512/bar-512.png")],itemId:0,payout:0},y=!0,k={initAudio(e){e.audio.set("win",new Audio("https://freesound.org/data/previews/387/387232_1474204-lq.mp3")),e.audio.set("insertCoin",new Audio("https://freesound.org/data/previews/276/276091_5123851-lq.mp3")),e.audio.set("bigwin",new Audio("https://freesound.org/data/previews/270/270319_5123851-lq.mp3")),e.audio.set("spin",new Audio("https://freesound.org/data/previews/120/120373_824230-lq.mp3")),e.audio.set("spinEnd",new Audio("https://freesound.org/data/previews/145/145441_2615119-lq.mp3")),e.audio.set("lock",new Audio("https://freesound.org/data/previews/56/56246_91374-lq.mp3"))},setOpen(e,t){e.open=t},setSpinning(e,t){e.isSpinning=t},setWon(e,t){e.won=t},setResults(e,t){e.results=t},setItemId(e,t){e.itemId=t},setPayout(e,t){e.payout=t}},I={namespaced:y,state:M,mutations:k},Z={open:!1,editMode:!1,videoId:"",itemId:0},S=!0,C={setOpen(e,t){e.open=t},setEditMode(e,t){e.editMode=t},setVideoId(e,t){e.videoId=t},setItemId(e,t){e.itemId=t}},x={namespaced:S,state:Z,mutations:C},O={open:!1,channel:""},$=!0,E={setOpen(e,t){e.open=t},setChannel(e,t){e.channel=t}},P={namespaced:$,state:O,mutations:E},W={message:"Loading...",closesIn:Date.now(),open:!1},L=!0,F={setMessage(e,t){e.message=t},setClosesIn(e,t){const n=Date.now()+1e3*t;e.closesIn=n},setOpen(e,t){e.open=t}},U={namespaced:L,state:W,mutations:F};o.ZP.use(i.ZP);const j={state:{connected:!1},modules:{session:m,commands:g,jukebox:b,slotmachine:I,youtubeplayer:x,twitchplayer:P,rewards:U},mutations:{setConnected(e,t){e.connected=t}}};var D=new i.ZP.Store(j),T=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"youtube-overlay",attrs:{id:"app"}},[t("transition",{attrs:{name:"slide-down"}},[e.rewards.open?t("ClaimRewardComponent"):e._e()],1)],1)},A=[],N=n(655),R=n(5904),q=n(176),J=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"habbo-reward-box"},[t("div",{staticClass:"habbo-message"},[e._v(e._s(e.rewards.message))]),t("div",{staticClass:"habbo-buttons"},[t("button",{staticClass:"habbo-button habbo-button-success",on:{click:function(t){return e.buttonClick(!0)}}},[e._v("Accept")]),t("button",{staticClass:"habbo-button",on:{click:function(t){return e.buttonClick(!1)}}},[e._v("Decline")])])])},B=[];class K{constructor(e){(0,s.Z)(this,"header","accept_reward"),(0,s.Z)(this,"data",void 0),this.data={accept:e}}}let H=class extends o.ZP{constructor(...e){super(...e),(0,s.Z)(this,"rewards",void 0)}buttonClick(e){Oe.communicationManager.sendMessage(new K(e)),this.$store.commit("rewards/setOpen",!1)}mounted(){const e=this.rewards.closesIn,t=e-Date.now();t>0&&setTimeout((()=>{this.$store.commit("rewards/setOpen",!1)}),t)}};(0,N.gn)([(0,q.ZM)((e=>e.rewards))],H.prototype,"rewards",void 0),H=(0,N.gn)([(0,R.ZP)({})],H);var G=H,V=G,z=n(1001),Y=(0,z.Z)(V,J,B,!1,null,"554dc700",null),Q=Y.exports;let X=class extends o.ZP{constructor(...e){super(...e),(0,s.Z)(this,"rewards",void 0)}};(0,N.gn)([(0,q.ZM)((e=>e.rewards))],X.prototype,"rewards",void 0),X=(0,N.gn)([(0,R.ZP)({components:{ClaimRewardComponent:Q}})],X);var ee,te,ne=X,se=ne,ae=(0,z.Z)(se,T,A,!1,null,null,null),oe=ae.exports;class ie{constructor(){(0,s.Z)(this,"_container",void 0),(0,s.Z)(this,"_bus",void 0),this._bus=new o.ZP,o.ZP.config.productionTip=!1,o.ZP.config.devtools=!0}initInterface(){this._container=new o.ZP({store:D,render:e=>e(oe)}).$mount("#app"),this.container.$store.commit("slotmachine/initAudio")}get container(){return this._container}get bus(){return this._bus}}(function(e){e[e["WebSocket"]=0]="WebSocket",e[e["ExternalFlashInterface"]=1]="ExternalFlashInterface",e[e["IFrameExternalFlashInterface"]=2]="IFrameExternalFlashInterface"})(ee||(ee={}));class re{parse(e){Oe.interfaceManager.container.$store.commit("youtubeplayer/setOpen",!0),Oe.interfaceManager.container.$store.commit("youtubeplayer/setVideoId",e.videoId),Oe.interfaceManager.container.$store.commit("youtubeplayer/setItemId",e.itemId),Oe.interfaceManager.container.$store.commit("youtubeplayer/setEditMode",""==e.videoId)}}class ce{parse(e){Oe.interfaceManager.container.$store.commit("slotmachine/setItemId",e.itemId),Oe.interfaceManager.container.$store.commit("session/setCredits",e.credits),Oe.interfaceManager.container.$store.commit("slotmachine/setOpen",!0)}}class le{parse(e){Oe.interfaceManager.container.$store.commit("slotmachine/setResults",[e.result1,e.result2,e.result3]),Oe.interfaceManager.container.$store.commit("slotmachine/setWon",e.won),Oe.interfaceManager.container.$store.commit("slotmachine/setPayout",e.payout),Oe.interfaceManager.container.$store.commit("slotmachine/setSpinning",!0),Oe.interfaceManager.bus.$emit("results")}}class de{parse(e){Oe.interfaceManager.container.$store.commit("session/setCredits",e.credits),Oe.interfaceManager.container.$store.commit("session/setId",e.id),Oe.interfaceManager.container.$store.commit("session/setUsername",e.username),Oe.interfaceManager.container.$store.commit("session/setLook",e.look)}}class me{parse(e){Oe.interfaceManager.container.$store.commit("session/setCredits",e.credits)}}class ue{parse(e){Oe.interfaceManager.container.$store.commit("commands/setCommands",e.commands),Oe.interfaceManager.container.$store.commit("commands/setOpen",!0)}}class he{parse(e){Oe.interfaceManager.container.$store.commit("jukebox/setPlaylist",e.playlist),Oe.interfaceManager.container.$store.commit("jukebox/setOpen",!0)}}class pe{parse(e){let t=e.playing;Oe.interfaceManager.bus.$emit("play",t)}}class ge{parse(e){let t=e.index;Oe.interfaceManager.bus.$emit("playSong",t)}}class we{parse(e){Oe.interfaceManager.container.$store.commit("jukebox/setPlaylist",e.playlist)}}class fe{parse(e){Oe.interfaceManager.container.$store.commit("jukebox/setPlaylist",[])}}class ve{parse(e){let t=e.song;Oe.interfaceManager.container.$store.commit("jukebox/addToPlaylist",t)}}class be{parse(e){let t=e.index;Oe.interfaceManager.bus.$emit("removeSong",t)}}class _e{parse(e){let t=e.videoId;""!=t&&(Oe.interfaceManager.container.$store.commit("twitchplayer/setChannel",t),Oe.interfaceManager.container.$store.commit("twitchplayer/setOpen",!0))}}class Me{constructor(){(0,s.Z)(this,"header","pong"),(0,s.Z)(this,"data",void 0),this.data={message:""}}}class ye{parse(e){Oe.communicationManager.sendMessage(new Me)}}class ke{constructor(e){(0,s.Z)(this,"header","sso"),(0,s.Z)(this,"data",void 0),this.data={ticket:e}}}class Ie{parse(e){Oe.interfaceManager.container.$store.commit("rewards/setMessage",e.message),Oe.interfaceManager.container.$store.commit("rewards/setClosesIn",e.close),Oe.interfaceManager.container.$store.commit("rewards/setOpen",!0)}}class Ze{constructor(){(0,s.Z)(this,"_webSocket",void 0),(0,s.Z)(this,"_events",void 0),(0,s.Z)(this,"_mode",void 0),(0,s.Z)(this,"_sso",void 0),(0,s.Z)(this,"_wsUrl",void 0),this._events=new Map,this.registerMessages()}registerMessages(){this._events.set("ping",new ye),this._events.set("youtube_tv",new re),this._events.set("slot_machine",new ce),this._events.set("slot_result",new le),this._events.set("session_data",new de),this._events.set("update_credits",new me),this._events.set("commands",new ue),this._events.set("jukebox_player",new he),this._events.set("play_stop",new pe),this._events.set("play_song",new ge),this._events.set("add_song",new ve),this._events.set("remove_song",new be),this._events.set("playlist",new we),this._events.set("dispose_playlist",new fe),this._events.set("twitch",new _e),this._events.set("reward_available",new Ie)}sendMessage(e){if(Oe.interfaceManager.container.$store.state.connected&&e)if(this._mode===ee.WebSocket){if(!this._webSocket||this._webSocket.readyState!=WebSocket.OPEN)return;this._webSocket.send(JSON.stringify(e))}else if(this._mode===ee.IFrameExternalFlashInterface){let t=document.getElementById("nitro");null!=t&&t.contentWindow?t.contentWindow.openroom(JSON.stringify(e)):window.openroom(JSON.stringify(e))}else{let t=document.querySelector("object, embed");t&&t.openroom(JSON.stringify(e))}}onMessage(e){let t;t="string"===typeof e||e instanceof String?JSON.parse(e.replace(/&#47;/g,"/")):JSON.parse(e.data);let n=this._events.get(t.header);n?n.parse(t.data):a.Log(t)}onOpen(){this._mode===ee.WebSocket&&this._sso&&this.sendMessage(new ke(this._sso)),Oe.interfaceManager.container.$store.commit("setConnected",!0),a.Log("connected")}onClose(){Oe.interfaceManager.container.$store.commit("setConnected",!1),a.Log("WebSocket closed")}onError(e){a.Log("WebSocket Error")}connectWebSocket(){if(!this._sso||!this._wsUrl)throw new Error("Cannot start websocket connection with undefined sso ticket or ws url");this._webSocket=new WebSocket(this._wsUrl),this._webSocket.onopen=this.onOpen,this._webSocket.onclose=this.onClose,this._webSocket.onmessage=this.onMessage,this._webSocket.onerror=this.onError}get events(){return this._events}get mode(){return this._mode}set mode(e){this._mode=e}set wsUrl(e){this._wsUrl=e}set sso(e){this._sso=e}}(function(e){e[e["Backspace"]=8]="Backspace",e[e["Tab"]=9]="Tab",e[e["Clear"]=12]="Clear",e[e["Enter"]=13]="Enter",e[e["Shift"]=16]="Shift",e[e["Control"]=17]="Control",e[e["Alt"]=18]="Alt",e[e["Esc"]=29]="Esc",e[e["Spacebar"]=32]="Spacebar",e[e["Left"]=37]="Left",e[e["Up"]=38]="Up",e[e["Right"]=39]="Right",e[e["Down"]=40]="Down"})(te||(te={}));class Se{constructor(e){(0,s.Z)(this,"header","move_avatar"),(0,s.Z)(this,"data",void 0),this.data={direction:e}}}class Ce{constructor(){(0,s.Z)(this,"enabled",void 0),(0,s.Z)(this,"keys",void 0),(0,s.Z)(this,"walking",void 0),(0,s.Z)(this,"_walkInterval",void 0),this.enabled=!0,this.walking=!1,this._walkInterval=null,document.addEventListener("keydown",this.OnKeyDown.bind(this)),document.addEventListener("keyup",this.OnKeyUp.bind(this)),this.keys=[te.Down,te.Left,te.Right,te.Up]}OnKeyUp(e){this.enabled&&this.keys.includes(e.keyCode)&&this.walking&&(this.walking=!1,this._walkInterval=setTimeout((()=>{this.walking||Oe.communicationManager.sendMessage(new Se("stop"))}),500))}OnKeyDown(e){if(this.enabled&&this.keys.includes(e.keyCode)){this.walking=!0,clearTimeout(this._walkInterval);let t="";switch(e.keyCode){case te.Left:t="left";break;case te.Up:t="up";break;case te.Right:t="right";break;case te.Down:t="down";break;default:return}Oe.communicationManager.sendMessage(new Se(t))}}}class xe{constructor(){(0,s.Z)(this,"_interactions",void 0),this._interactions=new Map,this.registerInteractions()}registerInteractions(){this._interactions.set("movement",new Ce)}get interactions(){return this._interactions}}class Oe{static init(){Oe._interfaceManager=new ie,Oe._communicationManager=new Ze,Oe._interactionManager=new xe}static get interfaceManager(){return Oe._interfaceManager}static get communicationManager(){return Oe._communicationManager}static get interactionManager(){return Oe._interactionManager}}(0,s.Z)(Oe,"_interfaceManager",void 0),(0,s.Z)(Oe,"_communicationManager",void 0),(0,s.Z)(Oe,"_interactionManager",void 0),Oe.init(),Oe.interfaceManager.initInterface(),window.startYTOverlay=function(e,t){e&&t?(Oe.communicationManager.mode=ee.WebSocket,Oe.communicationManager.wsUrl=t,Oe.communicationManager.sso=e):Oe.communicationManager.mode=ee.ExternalFlashInterface,$e(),a.Log(`Started application with mode ${Oe.communicationManager.mode}`)},window.connectWebSocket=function(){Oe.communicationManager.connectWebSocket()};let $e=function(){window.FlashExternalInterface||(window.FlashExternalInterface={legacyTrack:(e,t,n)=>{},listPlugins:()=>"",logEventLog:e=>{},track:(e,t,n)=>{},logDebug:e=>{},logWarn:e=>{},logCrash:e=>{},logError:e=>{},openPage:e=>{},openExternalLink:e=>{},openHabblet:(e,t)=>{},openWebPageAndMinimizeClient:e=>{}}),window.FlashExternalInterface.openHabblet=function(e,t){Oe.communicationManager.onMessage(e)},window.FlashExternalInterface.legacyTrack=function(e,t,n){"authentication"===e&&(Oe.communicationManager.mode===ee.WebSocket?Oe.communicationManager.connectWebSocket():Oe.communicationManager.onOpen())},window.FlashExternalInterface.listPlugins=function(){let e="";for(var t=0;t<navigator.plugins.length;t++)e+=navigator.plugins[t].name+"|";return e}};$e();let Ee=document.getElementById("nitro");(NitroConfig||Ee)&&(Oe.communicationManager.mode=ee.IFrameExternalFlashInterface,Oe.communicationManager.onOpen()),Ee&&Ee.contentWindow&&window.addEventListener("message",(e=>{if(!Ee||e.source!==Ee.contentWindow)return;const t="Nitro_LegacyExternalInterface";if("string"===typeof e.data)if(e.data.startsWith(t)){const{method:n,params:s}=JSON.parse(e.data.substr(t.length));if(!("FlashExternalInterface"in window))return;const a=window.FlashExternalInterface[n];if(!a)return;a(...s)}else;}))}},t={};function n(s){var a=t[s];if(void 0!==a)return a.exports;var o=t[s]={exports:{}};return e[s](o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,s,a,o){if(!s){var i=1/0;for(d=0;d<e.length;d++){s=e[d][0],a=e[d][1],o=e[d][2];for(var r=!0,c=0;c<s.length;c++)(!1&o||i>=o)&&Object.keys(n.O).every((function(e){return n.O[e](s[c])}))?s.splice(c--,1):(r=!1,o<i&&(i=o));if(r){e.splice(d--,1);var l=a();void 0!==l&&(t=l)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[s,a,o]}}(),function(){n.d=function(e,t){for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,s){var a,o,i=s[0],r=s[1],c=s[2],l=0;if(i.some((function(t){return 0!==e[t]}))){for(a in r)n.o(r,a)&&(n.m[a]=r[a]);if(c)var d=c(n)}for(t&&t(s);l<i.length;l++)o=i[l],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(d)},s=self["webpackChunkyoutube_overlay"]=self["webpackChunkyoutube_overlay"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=n.O(void 0,[998],(function(){return n(3503)}));s=n.O(s)})();
//# sourceMappingURL=app.05132be1.js.map